---
title: "Брошенные (stale) блоки в сети Биткоина"
date: 2020-03-05T00:00:00+00:00
categories: [Биткоин, Майнинг]
---

![Брошенный блок](/img/bitcoin_stale_block.jpg)

На днях в сети Биткоина был добыт «брошенный» блок (stale block). На картинке выше это блок справа, он был добыт на 4 секунды быстрее, чем блок слева, который и продолжил цепочку. Почему это происходит?

Каждый майнер добывает свой блок, но блоки эти практически одинаковы, т. к. майнеры пользуются одинаковым софтом для майнинга и руководствуются одинаковыми (наиболее оптимальными и прибыльными) правилами для построения блоков и включения в них транзакций. Блок справа абсолютно валиден и практически ничем не отличается от блока слева. Он стал брошенным, потому что:
1. Майнер, добывший блок 619 971, получил левый блок раньше, чем правый.
2. Этот же майнер смог добыть новый блок быстрее, чем те майнеры, которые получили правый блок.

Если два блока добываются практически одновременно в разных концах мира (либо ещё какая-то задержка в рассылке блоков), то майнеры получают разные блоки. И, как только они их получат, они сразу начнут майнить новый блок. В итоге выиграет цепочка с самым большим количеством блоков.

По сути, это микроразделение сети, микрофорк. И это тот случай, когда одного подтверждения транзакции недостаточно. Представьте такую ситуацию:
1. Вы покупаете что-то за биткоины.
2. Магазин требует одно подтверждение транзакции.
3. Вы оплачиваете, получаете подтверждение, магазин передаёт вам товар.
4. Происходит микроразделение, добывается новый блок с тем же номером, но чуть другим списком транзакций. И вашей транзакции в нем нету.
5. У вас на руках биткоины и товар. Магазин понёс потери.

Это как раз и есть пример двойной траты.